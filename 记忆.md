# 第一章操作系统引论

**1. 操作系统的定义**

操作系统（软件）的定义：操作系统是一组控制和管理计算机硬件和软件资源，合理地对各类作业进行调度，以及方便用户使用的程序集合。

**2. 操作系统的目标**

方便性、有效性、开放性和可扩充性。

**3. 操作系统的作用**

- 用户与硬件系统的接口（软件接口）主要有三种方式：
  - 命令方式
  - 系统调用方式
  - 图形，窗口方式
- OS作为计算机系统4类资源的管理者
  - 处理机管理：分配和控制处理机
  - 存储器管理：内存的分配与回收
  - I/O设备管理：主要管理I/O设备的分配与操纵
  - 文件管理：实现对文件的存取，共享和保护
- OS实现了对计算机资源的抽象
  - 裸机：完全没有软件覆盖的计算机系统
  - 扩充机器或虚拟机：覆盖了软件的机器

**4. 操作系统的发展**

无操作系统的时代：

* 人工操作
* 脱机I/O

有操作系统的时代：

* 批处理（单道批/多道批）
* 分时
* 实时

**5. 操作系统的基本特性**

并发、共享、虚拟、异步

**6. 操作系统的主要功能**

* 对处理机的管理

  进程控制

  进程通信

  进程同步

  进程调度

* 对存储器的管理

  内存分配

  内存保护

  地址映射

  内存扩充（虚拟的扩充）

* 对I/O设备的管理

  缓冲的管理

  设备分配

  设备处理

* 对文件的管理

  文件存储空间的管理

  目录管理

  文件的读写管理和保护

* 用户接口

**7. 操作系统的结构**

- 传统的操作系统
  - 无操作系统结构
  - 模块化结构
  - 分层式结构
- 非传统操作系统
  - 微内核操作系统结构

# 第二章 进程管理

## 2.1 进程的描述

**1. 程序的顺序执行的特征**

顺序性、封闭性、可再现性

**2. 程序并发执行的特征**

间断性、失去封闭性、不可再现性

**3. 进程的定义**

程序关于某个数据集合的一次执行过程。

**4. 进程的特征**

* 结构特征：程序 + 数据 + PCB
* 动态性：有生命周期
* 并发性：多个进程实体在同一时间段内可以同时执行
* 独立性：能独立运行，独立获得资源和独立接受调度的基本单位
* 异步性：以不可预知的速度向前推进

**5. PCB是进程存在的唯一标志**

**6. 进程控制块PCB的作用：**

1）作为独立运行基本单位的标志

2）能实现间断性的运行方式

3）提供进程管理所需要的全部信息

4）提供进程调度所需要的全部信息

5）实现与其他进程的同步和通信

**7. 进程控制块的组织方式**

线性方式、链接方式和索引方式。

## 2.2 进程的控制

**1. 进程的创建**

* 引起进程创建的事件

  用户登录、作业调度、提供服务和应用请求

* 进程创建的过程

  申请空白PCB、为新进程分配运行所需的资源、初始化空白PCB和插入就绪队列（如果就绪队列可以容下）

**2. 进程的终止**

* 引起进程终止的事件

  正常终止、异常结束和外界干预。

* 进程的终止过程

  根据终止进程的标识符，搜索出要终止的进程的PCB。

  判断该进程所处的状态，如果处于执行态，立即终止，并置调度标志为真。

  终止其子孙进程。

  将要终止进程的所有资源归还给父进程或者系统。

  将其从所在队列移除。

**3. 引起进程阻塞和唤醒的事件：阻塞和唤醒是相对应的**

* 引起进程阻塞的事件

  1）向系统请求共享资源失败

  2）等待某种操作的完成

  3）新数据尚未到达

  4）等待新任务的到达

- 进程阻塞的过程：**进程**通过调用阻塞原语block==将自己==阻塞

  1）进入block后立即停止执行

  2）保存现场

  3）将进程控制块中的现行状态改为阻塞，并将PCB插入阻塞队列

  4）转调度程序，进行重新调度

- 进程唤醒的过程：当阻塞的进程所期待的事件发生时，**有关进程**（不是本身）调用唤醒原语wakeup，将等待该事件的进程唤醒。唤醒之后进入就绪队列。

  1）将被阻塞的进程从等待该事件的阻塞队列中移除

  2）将PCB的现行状态由阻塞改为就绪

  3）然后再将该PCB插入就绪队列中

  4）转进程调度或者返回

**4. 进程的挂起与激活**

- 进程的挂起过程：当出现了引起进程挂起的事件之后，OS利用挂起原语将指定的进程挂起（即调出内存）

  首先检查进程的状态（不同的状态采取不同的处理方式），若该进程正处于活动就绪状态，将其改为静止就绪态；若该进程处于活动阻塞状态，将该进程改为静止阻塞状态；若该进程处于执行状态，将其改为静止就绪状态，调度程序重新进行调度。

- 进程的激活过程：

  1）首先将进程从外存调入内存，

  2）检查进程所处的状态，如果进程处于静止就绪，将其改为活动就绪，如果处于静止阻塞，将其改为活动阻塞

  3）检查进程的优先级，如果优先级高，可以进行抢占当前运行进程的资源

## 2.3 进程同步

**1. 进程同步的基本概念**

- 进程同步的目的：1）按照一定的规则共享系统资源；2）对多个相关进程在执行次序上进行协调，是程序具有可再现性。

- 两种形式的制约关系：

  1）间接相互制约关系：多个进程在并发执行时，由于**共享系统的临界资源**而相互制约，如磁带机，打印机，表格等。（互斥）

  2）直接相互制约关系：多个进程为完成同一任务而**相互合作**（同步）

- **临界资源：**一次仅允许一个进程使用的共享资源。例如打印机，磁带机，表格等。

- 互斥和同步的概念：

  1）互斥：并发的多个进程由于竞争同一资源而产生的相互排斥的关系

  2）同步：进程间共同完成一项任务时直接发生相互作用的关系

- **临界区：**每个进程中访问临界资源的那段**代码**

- 同步机制应遵循的原则：

  1）空闲让进

  2）忙则等待

  3）有限等待：不能一直等

  4）让权等待：进程不能进入临界区，就应当释放==处理机==，让权指让出处理机

**2. 进程之间的两种关系：同步关系和互斥关系**

## 2.6 进程通信

**1. 基本概念**

- 概念：即进程之间的信息交换

- 分类：首先分为低级通信和高级通信：

  低级：进程间仅交换一些状态和少量数据。常见的有进程的互斥与同步。低级的原因：1）效率低（传递的数据量小），2）不透明

  高级：进程间可交换大量数据。是指用户可直接利用操作系统所提供的一组**通信命令**，高效地传送大量数据的一种通信方式。高级的原因：1）效率高（可以传送大量的数据）2）对用户透明

- 进程高级通信的类型：1）共享存储器系统；2）管道通信系统；3）消息传递系统；4）客户机-服务器系统。

> 注意：
>
> 在共享存储器系统中，共享数据结构的方式属于低级通信。

# 第三章 处理机调度与死锁

## 3.1 处理机调度的层次和调度算法的目标

**1. 三级调度**

中级调度的目的：提高内存利用率和系统的吞吐量

**2. 三级调度队列模型**

**3. 处理机调度算法的共同目标**

资源利用率、公平性、平衡性和策略强制执行。

**4. 批处理系统的目标**

平均周转时间短、系统吞吐量高和处理机利用率高。

**5. 分时系统的目标**

响应时间快、均衡性。

**6. 实时系统的目标**

截止时间的保证、可预测性

## 3.2 作业与作业调度

**1. 作业运行的三个阶段和三种状态**

收容阶段--------->后备状态

运行阶段--------->运行状态

完成阶段--------->完成状态

**2. 调度算法**

* 先来先服务：

  优点：有利于长作业和CPU繁忙性作业

  缺点：不利于短作业和I/O繁忙性作业

* 短作业优先：

  优点：有利于短作业

  缺点：1）不利于长作业；2）无法事先预支作业的执行时间；3）无法实现人机交互；4）未考虑作业的紧迫程度。

* 优先级调度算法

* 高响应比优先调度算法

  优先权的计算方法

## 3.3 进程调度

**1. 进程调度中抢占的原则**

优先权原则、时间片原则、短进程优先原则

**2. 调度算法**

* 先来先服务

* 短进程优先

* 时间片轮转

* 优先权调度算法

  优先级的类型：静态优先级和动态优先级

  静态优先级的确定：

  * 系统进程高于用户进程
  * 对资源要求少的优于对资源要求高的
  * 用户的要求

* 多级反馈队列

1. 分析：

   1）终端型作业用户。大多属于较小的交互性作业，只要能使作业在第一队列的时间片内完成，便可令用户满意。

   2）短批处理作业用户。周转时间仍然较短，至多在第二到三队列即可完成。

   3）长批处理作业用户。将依次在1~n级队列中轮转执行，不必担心作业长期得不到处理。

**3、为什么说多级反馈队列调度算法能较好地满足各类用户的需要？**

答：多级反馈队列调度算法能较好地满足各种用户的需要。①对终端型用户而言，用户所提交的作业大都属于交互型作业，作业通常比较小，系统只要能使这些作业在第一队列所规定的时间内完成，便可使终端型用户感到满意。②对于短的批处理作业用户而言，他们的作业开始像终端型作业一样，如果仅在第一队列中执行一个时间片即可完成，便可获得与终端型作业一样的响应时间，对于稍长的作业，通常也只需要在第二队列和第三队列各执行一个时间片即可结束，其周转时间仍然较短。③对于长批处理作业用户而言，他们的长作业将依次在第1，2，---，直到第N个队列中运行，然后再轮转方式运行，用户不必担心其作业长期得不到处理。

## 3.4 实时调度算法

**1. 实现的基本条件**

* 提供必要的信息
* 系统处理能力强
* 采用抢占式调度机制
* 具有快速切换的机制

**2. 实时调度算法的分类**

* 非抢占式

  非抢占式轮转

  非抢占式优先

* 抢占式

  基于时钟中断的抢占式优先调度算法

  立即抢占的优先级调度算法

* 最早截止时间优先

* 最低松弛度优先：注意进程进行切换的时间。

## 3.5 死锁概述

**1. 死锁的的定义**

死锁（Deadlock）：是指多个进程在运行过程中因争夺资源而造成的一种僵局，当进程处于这种状态时，若无外力作用，它们都将无法再向前推进。

**2. 引起死锁的原因**

* 竞争消耗性资源
* 竞争不可剥夺性资源
* 进程的推进顺序不当

**3. 引起进程死锁的四个必要条件**

1. 互斥条件

2. 请求和保持条件

   破坏的方法：

   * 一次性申请
   * 只获得一部分，但是在下一次申请的时候需要释放掉之前申请的

3. 不可抢占条件

   破坏的方法：

   * 当进进程在申请资源的时候若无法得到满足则将自己所拥有的全部释放。

4. 循环等待条件：指在发生死锁时，必然存在一个进程——资源的环形链。即进程集合{P0,P1,P2,…,Pn}中的P0正在等待一个P1占用的资源；P1正在等待一个P2占用的资源，……，Pn正在等待一个已被P0占用的资源。

   破坏的方法：

   * 资源的有序分配

**4. 处理死锁的方法**

* 预防死锁

  破坏四个必要条件，其中互斥条件不可以被破坏

* 避免死锁

* 检测死锁

* 解除死锁

# 第四章 存储器管理

## 4.1 存储器的层次结构

**1. 多层存储器的层次结构**

*  CPU寄存器

* 主存：

  高速缓冲：对接CPU寄存器

  主存储器

  磁盘缓冲：对接固定磁盘

* 辅存：

  固定磁盘

  可移动存储设备

> 注意：
>
> 上述中主存和CPU寄存器属于系统管理，断电之后，信息便会丢失
>
> 辅存部分属于设备管理的范畴，他们中保存的信息会被长久保存。

**2. 可执行存储器**

寄存器和主存储器被称为可执行存储器。

> OS主要提供对可执行存储器的分配、回收、以及存储层次间数据的移动等。
>
> 用户主要负责对设备和文件的管理

**3. 高速缓冲和磁盘缓冲**

高速缓冲：解决主存储器和CPU寄存器的速度不匹配问题

磁盘缓冲：解决固定磁盘和主存储器之间的速度不匹配的问题

## 4.2 程序的装入和链接

**1. 程序的装入方式**

绝对装入方式、可重定位装入方式（静态重定位）、动态运行时装入方式

**2. 程序的链接方式**

静态链接方式、装入时动态链接方式、运行时动态链接

## 4.3 连续分区分配

**1. 连续分配存储管理方式**

* 单一连续分配

* 固定分区分配：可分为分区大小相等和分区大小不等两种情况

* 动态分区分配：

  三种分区分配算法：

  首次适应

  循环首次适应

  最佳适应

* 动态可重定位分区分配

  可重定位寄存器，紧凑

**2. 分区的组织方式**

在连续分配配的方式中普遍采用空闲分区表或者空闲分区链进行组织

## 4.4 对换

**1. 对换引入的原因**

提高处理机的利用率和吞吐量

**2. 对换的类型**

整体对换、页面对换、

## 4.5 分页存储管理方式

**1. 分区的组织方式**

分页：使用页表进行组织，页表常驻内存。

分段：使用段表，段表同样常驻内存

**2. 基本分页**

**3. 基本分段**

**4. 基本段页式**

# 第七章

**1、什么是文件的物理结构和逻辑结构？**

答：文件的逻辑结构是从用户观点出发所看到的文件组织形式，是用户可以直接处理的数据及其结构。文件的逻辑结构有两种形式：有结构的记录文件和无结构的流式文件。		

​	文件的物理结构是指文件在外存上的存储组织形式。文件的物理结构有三种形式：顺序结构、链接结构和索引结构。