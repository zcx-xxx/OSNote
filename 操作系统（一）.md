# 操作系统

## 一、操作系统引论

### 1. 基本概念

1. 操作系统（软件）的定义：操作系统是一组控制和管理计算机硬件和软件资源，合理地对各类作业进行调度，以及方便用户使用的程序集合。

### 2.操作系统的目标和作用

1. 目标：**方便性，有效性，**可扩充性，开放性。

   方便性：方便用户的操作

   有效性：1）使计算机的资源（**CPU**和主存）忙碌起来，从而的带有效的利用。2）数据有序而节省存储空间。3）合理的组织计算机的工作流程。

   可扩充性：主要是向上兼容

2. 作用：

   * 用户与硬件系统的接口（软件接口）主要有三种方式：
     * 命令方式
     * 系统调用方式
     * 图形，窗口方式
   * OS作为计算机系统4类资源的管理者
     * 处理机管理：分配和控制处理机
     * 存储器管理：内存的分配与回收
     * I/O设备管理：主要管理I/O设备的分配与操纵
     * 文件管理：实现对文件的存取，共享和保护
   * OS实现了对计算机资源的抽象
     * 裸机：完全没有软件覆盖的计算机系统
     * 扩充机器或虚拟机：覆盖了软件的机器

### 3.操作系统的发展过程  

1. 无OS

   * 人工方式
   * 脱机I/O方式

2. 有OS

   * 单道批处理系统：类似一台每次只能洗一件衣服的全自动洗衣机洗衣机。

     * 作业：一个进程从装入外存到输出正确的结果为止

     * 处理的过程：首先将一批作业以脱机的方式输入到磁盘上，由监督程序将第**一个作业调到内存**中，在该作业执行结束后，监督程序再将下一个作业调入内存中，依次类推。。。

     * 特点：

       1）自动性：对于无操作系统来说，是优点，程序可以自动执行了，不需要完全由人工来操作，但是对于后续的操作系统来说是缺点，因为人完全无法进行干预。

       2）顺序性：程序只能按照预先的顺序进行执行，缺点

       3）单道性：同一时间段内只能执行一道程序，即使当该道程序不需要使用CPU时，只要该程序没有结束，那么CPU只能处于等待状态，浪费资源，缺点

     * 主要缺点：系统的利用率太低

   * **多道批处理系统**

     * 多道：内存中同时（同一时间间隔）存放多个相互独立的程序，多道是==共享（共享程序和数据）==的基础。
     * 计算机中最重要的两个资源：CPU和内存
     * 多道批处理系统的处理过程：1）用户提交的作业首先放在外存上（排队形成后备队列）2）作业调度程序选择若干个作业进入内存。3）假设作业A需要进行I/O操作，则此时B作业可以占用CPU和内存，极大地提高了资源的利用率。

     * 多道批处理系统的特点：

       1）多道性：内存中同一时间间隔内可以存放多道程序。

       2）无序性：作业完成的先后顺序和作业进入内存的先后顺序无关

       3）调度性：（两级调度）

       * 作业调度：外存—>内存（选择多个作业）
       * 进程调度：分配处理机（选择一个作业）（注：如果只有一个CPU，那么在同一时刻只能执行一个程序）

     * 多道批处理系统的优缺点：

       1）资源利用率高：CPU可以一直干活

       2）系统吞吐量大：1）CPU和其他资源保持“忙碌状态”；2）仅当作业完成时或者程序运行不下去的时候才进行切换作业，系统开销小。（吞吐量：单位时间内完成的总工作量）

       3）平均周转时间内长：由于作业需要排队，所以一个作业可能需要几个小时或者几天的时间（进入系统：作业提交到外存到作业完成，退出系统的时间）

       4）无交互能力：批处理系统均具有的缺点，一旦提交到外存，人就无法在进行干预

   * **分时系统**

     * 定义：在一台主机上连接多个**终端**（一个输入或者输出设备），允许多个用户同时通过自己的终端，已交互的方式使用计算机，共享主机中的资源

     * 产生的动力：

       1）人机交互：批处理操作系统作业一旦提交到外存上，人为便不可以对其进行控制。

       2）共享主机：多个用户共享一台计算机，但是彼此不能感觉到其他用户的存在。

     * 分时系统的特征：

       1）多路性：在同一时间范围内，可以为多个用户服务，宏观上表现的是同时为多个用户服务，微观上轮流

       2）独立性：多个用户在自己的终端上进行操作，彼此之间互不干扰，感觉在独占主机。

       3）及时性：用户的请求能在**较短（一般即为人能接受的时间）**的时间内得到响应。

       4）交互性：用户可以通过终端与系统进行人机对话。

       5）可靠性

   * **实时系统**

     * 定义：系统能**及时（比分时系统快）**响应外部事件的请求。

     * 类型：1）控制系统。2）信息查询系统。3）多媒体系统。4）嵌入式系统

     * 特征：

       1）多路性

       2）独立性

       3）及时性：比分时快

       4）交互性

       5）可靠性：比分时更可靠

3. 上述最后三种为最基本的操作系统

### 4.操作系统的基本特性

* **并发（最主要）**

  * 并行：两个或多个事件在同一时刻发生

  * 并发：两个或多个事件在同一时间间隔内发生

  * 不同的处理机系统：

    单处理机系统：宏观上程序可以并发执行，微观上是逐条语句进行执行，不可能实现并行

    多处理机系统：有可能实现并行执行

* **共享（也很重要）**：多道出现之后，便有了共享

  * 互斥共享方式：对临界资源的访问

    > 临界资源
    >
    > 在**一段时间内**只允许一个进程访问的资源，如打印机，磁带机，栈，变量和表格等

  * 同时访问方式：允许在同一段时间内由多个进程 “ 同时 ” 对他们进行访问。

    * 该处的 “ 同时 ” 只是宏观意义上的同时，在微观上进程对该资源的访问是交替进行的
    * 使用场景：磁盘设备，一些用重入码编写的文件

* 虚拟

  * 定义：通过某种技术将一个物理实体变为若干个逻辑上的对应物的功能

* 异步

  * 定义：进程以人们不可预知的速度向前推进

### 5.操作系统的主要功能

* 资源管理功能

  1）处理机的管理功能

  * 进程控制、进程同步、进程通信、调度

  2）存储器的管理功能

  * 内存分配、内存保护、地址映射和内存扩充

  3）设备的管理功能

  * 缓冲管理、设备分配、设备处理

  4）文件的管理功能

  * 文件存储空间的管理、目录管理、文件的读/写管理和保护

* 用户接口功能

  * 命令接口

    1）联机用户接口：

    * 使用条件：几乎所有的计算机系统
    * 组成：命令 + 终端处理程序 + 命令解释程序
    * 操作过程：1）用户从键盘上输入程序。2）终端处理程序接受命令并显示到屏幕上。3）命令解释程序解释并执行命令

    2）脱机用户接口：

    * 适用条件：专为批处理系统提供。（因为批处理系统有一个预输入的过程）
    * 组成：$JCL$（Job Control Language：作业控制语言） + 作业说明书 + 命令解释程序
    * 操作的执行过程：1）用作业控制语言将需要对作业进行控制的和干预的命令事先写在作业说明书上，2）将作业和作业说明书一起提交给系统。3）系统调用命令解释程序，将作业说明书上的命令逐条解释执行，直到遇到停止语句结束作业的运行

  * 程序接口

  * 图形和窗口的接口

    * 组成：一组系统调用
    * 适用情况：专门为用户程序在执行中访问系统资源而设置

### 6.操作系统结构设计

* 传统的操作系统
  * 无操作系统结构
  * 模块化结构
  * 分层式结构
* 非传统操作系统
  * 微内核操作系统结构

### 7.常见的操作系统

1. Unix，Linux，Windows，DOS，